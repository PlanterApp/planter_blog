{{- $cover := (.Resources.ByType "image").GetMatch (printf "*%s*" (.Params.cover.image)) }}
{{- $content := .Plain | truncate 500 | jsonify }}

{
  "title": "{{ .Title }}",
  "author": "{{ .Params.author }}",
  "image": {
    "url": {{- if $cover -}} "{{ $cover | absURL }}" {{- else }} "https://blog.planter.garden{{.Params.cover.image }}" {{- end }},
    "caption" : "{{ .Params.cover.caption }}",
    "alt" : "{{ .Params.cover.alt }}"
  },
  "date" : "{{ .Params.date }}",
  "permalink" : "{{ .Permalink }}",
  "content" : {{ $content }}
}
